#!/usr/bin/env bash
set -euo pipefail

echo
echo "========================================"
echo "  SCRIPT Dâ€™INSTALLATION EN LOCAL"
echo "========================================"
echo

# --- 1) Demander les identifiants de lâ€™utilisateur GitHub ---
read -p "Nom dâ€™utilisateur GitHub : " GITHUB_USER
read -s -p "Mot de passe ou token GitHub : " GITHUB_TOKEN
echo
echo "â†’ Identifiants saisis (le token reste masquÃ©)."
echo

# --- 2) Exemple : configurer la GitHub CLI avec ces identifiants ---
# (optionnel, selon ce que vous voulez faire ensuite)
# Si vous utilisez la GH CLI, on peut faire par exemple :
#   echo "$GITHUB_TOKEN" | gh auth login --with-token
# Mais ici, on se contente juste de stocker dans un fichier de config local.

CONFIG_DIR="$HOME/.neomnia"
mkdir -p "$CONFIG_DIR"
cat > "$CONFIG_DIR/credentials.conf" <<EOF
GITHUB_USER="$GITHUB_USER"
GITHUB_TOKEN="$GITHUB_TOKEN"
EOF

echo "â†’ Credentials enregistrÃ©s dans $CONFIG_DIR/credentials.conf"
echo

# --- 3) Poursuivre la suite de lâ€™installation en local ---
# Vous pouvez ajouter ici les commandes que vous souhaitez exÃ©cuter
# dÃ©sormais que vous connaissez $GITHUB_USER et $GITHUB_TOKEN.
# Par exemple :
#   git clone https://github.com/votreorg/votre-projet.git
#   cd votre-projet && ./setup-environnement.sh
#
# Par dÃ©faut, on montre simplement un message de rÃ©ussite :

echo "ðŸŽ‰ Installation locale terminÃ©e avec succÃ¨s."
exit 0
